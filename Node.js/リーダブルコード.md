商品リンク
https://amzn.to/2xF83gb

# 目次
1. 理解しやすいコード
2. 名前に情報を詰め込む
3. 誤解されない名前
4. 美しさ
5. コメントすべきことを知る
6. コメントは正確で簡潔に
7. 制御フローを読みやすくする
8. 巨大な式を分割する
9. 変数と読みやすさ
10. 無関係の怪問題を抽出する
11. 一度に１つのことを
12. コードに思いを込める
13. 短いコードを書く
14. テストと読みやすさ
15. 「分/時間カウンタ」を設計実装する
16. 付録

# 理解しやすいコード
- 🔑コードは理解しやすくなければいけない
- 🔑コードは他人が最短で理解できように書かなければいけない
- コードは短い方がいい。だけど「理解するまでにかかる時間」を短くする方が大切

# 名前に情報を詰め込む
- 🔑名前に情報を詰め込む
- テーマ
  1. 明確な単語を選ぶ
  2. 汎用的な名前を避ける
  3. 抽象的な名前よりも具体的な名前を使う
  4. 接尾辞や接頭辞を使って情報を追加する
  5. 名前の長さを決める
  6. 名前のフォーマットで情報を伝える
- 明確な単語を選ぶ
  - getはあまり明確な単語ではない
    - GetPage(url)ならば、DownloadPage()の方が明確
  - Size()では何を返すメソッドだか分からない
    - Height(), NumNodes(), MemoryBytes()など
  - Stop()より、動作に合わせて明確な名前の方が良い
    - 取り消しがつかない思い操作ならKill()
    - 後からResume()できるなら、Pause()
- シソーラス(類語辞典)を活用してみよう
  - send : deliver, dispatch, announce
  - find : search, extract, locate
  - start : launch, create, begin, open
- 🔑気取った言い回しよりも明確で正確な方がいい
- tmpやretvalなどの汎用的な名前を避ける
  - retvalには「これは戻り値です」以外の情報はない
    - 2乗の合計を表すなら、sum_squares
    - 💬retvalという名前には情報がない。変数の値を表すような名前を使おう
  - 💬tmpという名前は、生存期間が短くて、一時位的な保管が最も大切な変数にだけ使おう
- ループイテレータ
  - i・j・k・iterなどの名前は、インデックスやループイテレータでよく使われている
  - イテレータが複数ある場合には、インデックスにもっと明確な名前をつける
    - i・j・kではなく、説明的な名前(club_i・member_i・users_i)にする
- 💬tmp・it・retvalのような汎用的な名前を使う時は、それ相応の理由を用意しよう
- 値の単位
  - 単位のない仮引数と、単位を追加したよりよいバージョンの仮引数
    - delay : delay_secs
    - size : size_mb
    - limit : max_kbps
    - angle : degrees_cw
- 変数の意味を間違ってしまった時にバグになりそうなところにだけ重要な属性を追加する
- 名前の長さを決める
  - 長い名前を避ける理由はいくつもあるが、「入力しにくい」というのは理由にならない
  - 頭文字と省略系は、stringを「str」とすれば理解できる様にチームメイトが理解できるだろうか
  - 単語を除いても意味が損なわれないものはその不要な単語を投げ捨てる
- 名前のフォーマットで情報を伝える
  - アンダースコア・ダッシュ・大文字を使って名前に情報を詰め込むことができる
  - 様々なフォーマット規約
    - CamelCase(キャメルケース): 小文字をアンダースコアで区切ったもの
    - コンストラクタ(newで呼び出される関数)は大文字で始める
    - 通常の関数は小文字で始める
## まとめ
- 明確な単語を選ぶ
  - 例えば。Getではなく、状況に応じてFetchやDownloadなどを使う
- tmpやretvalなどの汎用的な名前を避ける
  - ただし、明確な理由があれば話は別
- 具体的な名前を使って、物事を詳細に説明する
  - ServerCanStart()よりも、CanListenOnPort()の方が明確
- 変数名に大切な情報を追加する
  - ミリ秒を表す変数名には後ろに_msをつける。これからエスケープが必要な変数には、前にraw_をつける
- スコープの大きな変数には長い名前をつける
  - スコープが数画面におよぶ変数名に1~2文字の短い暗号名た名前をつけてはいけない
  - 短い名前はスコープが数行の変数につけるべきだ
- 大文字やアンダースコアなどに意味を含める
  - 例えば、クラスのメンバー変数にアンダースコアをつけて、ローカル変数と区別する

# 誤解されない名前
- 🔑名前が「他の意味と間違えられることはないだろうか？」と何度も自問自答する
- filter()
  - 「選択」するのであればSelect(), 「除外」するのであればexclued()
- 限界値を含める時はminとmaxを使う
  - limitという名前では「未満」なのか「以下」なのかが分からず曖昧になる
  - 💬限界値を明確にするには、名前の前にmax_やmin_をつけよう
- 範囲を指定する時はfirstとlastを使う
- 複合/排他的範囲にはbeginとendを使う
- ブール値の名前
  - ブール値を変数名は、値にis・has・can・shouldなどをつけて分かりやすくする
    - SpaceLeft()がもしブール値を返す場合はHasSpaceLedt()としたほうがよい
  - 変数名を否定的にするのは避けた方がいい
    - disable_ssl = false; より use_ssl = true; の方が短くて、声に出して読みやすい
- ユーザーの期待に合わせる
  - ユーザーが先入観を持っているために誤解を招いてしまうことがあるため、諦めて誤解されない名前にする
- まとめ
  - あなたのコードを読んでいる人が、あなたの意図を正しく理解できるようにする

# 美しさ
- 著者たちが使っている3つの原則
  - 読み手が慣れているパターンと一貫性のあるレイアウトを使う
  - 似ているコードは似ているように見せる
  - 関連するコードをまとめてブロックにする
- 考えてみれば、プログラミングの時間のほとんどはコードを読む時間なのだッ！
- 一貫性のある簡潔な改行位置
  - 会社やプロジェクト単位などで、コーディング標準を守る
- メソッドを使った整列
- 縦の線をまっすぐにする
  - メソッドの引数を空白を使って整列する
  - 似た様なコードの場合、整列していることでタイプミスにも気付きやすくなる
- 一貫性の意味のある並び
  - 最重要なものから重要度順に並べる
  - アルファベット順に並べる
- 宣言をブロックにまとめる
  - 人間の脳はグループや階層を1つの単位として考えるので、コードを早く理解するには単位を作る
    - 全てのメソッドをトンリ的なグループに分ける
- コードを段落に分割する
  - 文章は複数の段落に分割されており、コードも同じ理由で分けるべき
    - 似ている考えをグループにまとめて、他の考えと分ける
    - 視覚的な「踏み石」を提供でき、ページの中で自分の場所を見失わない様にする
    - 段落単位で移動できるようになる
- 🔑一貫性のあるスタイルは「正しい」スタイルよりも大切だ
## まとめ
- 複数のコードブロックで同じ様なことをしていたら、シルエットも同じ様なものにする
- コードの「列」を整理すれば、概要が把握しやすくなる
- ある場所でA・B・Cのように並んでいたものを、他の場所でB・C・Aのように並べてはいけない。意味のある順番を選んで常にその順番を守る
- 空行を使って大きなブロックを論理的な段落にわける

# コメントすべきことを知る
- 🔑コメントの目的は書き手の意図を読み手に知らせることである
- テーマ
  - コメントするべきでは「ない」ことを知る
  - コードを書いているときの自分の考えを記録する
  - 読み手の立場になって何が必要になるかを考える
- 🔑コードからすぐにわかることをコメントに書かない
- ひどい名前はコメントをつけずに名前を変える
  - 繰り返し使われる関数名などは、優れたコメントより名前の方が大切
  - 通常は「補助的なコメント」（コードの読みにくさを補うコメント）が必要になることはない
    - 「優れたコード　＞ ひどいコード＋優れたコメント」
  - 自分の考えを記録する
  - コードの血管にコメントをつける
    - コードは絶えず進化するので、その過程で欠陥を生む運命なので、欠陥を文書化することを恥ずかしがらなくていい
    - 記法
      - TODO  : あとで手をつける
      - FIXME : 既知の不具合があるコード
      - HACK  : あまり綺麗じゃない解決策
      - XXX   : 危険！大きな問題がある
  - 定数にコメントをつける
    - 定数が何をするのか、なぜその値を持っているのかという「背景」についてを記録する
- ライダーズブロックを乗り越える
  - ライダーズブロック: 行き詰まってしまって、文章がかけないこと
  - コメントを書く手順は、3つの簡単な手順に分解できる
    1. 頭の中にあるコメントをとにかく書き出す
    2. コメントを読んで（どちらかと言えば）改善が必要なものを見つける
    3. 改善する
      - コメントを書く様になれば、次第に手順1の品質がよくなっていく
## まとめ
- コメントすべきでは「ない」こと
  - コードからすぐに抽出できること
  - ひどいコードを補う「補助的なコメント」はコメントを書くのではなくコードを修正する
- 記録すべき自分の考え
  - なぜコードが他のやり方ではなくこうなっているのか(「監督コメンタリー」)
  - コードの欠陥をTOFO:やXXX:などの気泡を使って示す
  - 定数の値にまつわる「背景」
- 読み手の立場になって考える
  - コードを読んだ人が「えっ？」と思うところを予測してコメントをつける
  - 平均的な良い手が驚く様な動作は文書化しておく
  - ファイルやクラスには全体像のコメントを書く
  - 読み手が細部に捕われないように、コードブロックにコメントをつけて概要をまとめる

# コメントは性格で簡潔に
- 🔑コメントは領域に対する情報の比率が高くなければいけない
- コメントは簡潔にしておく
- あいまいな代名詞を避ける
- コードの意図を書く
- 「名前付き引数」コメント
  - 値の前にコメントを置く
- 情報密度の高い言葉を使う
## まとめ
- 複数のものを指す可能性がある「それ」や「これ」などの代名詞を避ける
- 関数の動作はできるだけ正確に説明する
- コメントに含める入出力の逸例を慎重に選ぶ
- コードの意図は、詳細レベルではなく、高レベルで記述する
- よくわからない引数にはインラインコメントを使う(ex: Function(/* arg = */...))
- 多くの意味が詰め込まれた言葉や表現を使って、コメントを簡潔に保つ

#制御フローを読みやすくする
- 🔑条件やループなどの制御フローはできるだけ「自然」にする。コードの読み手が立ち止まったり読み返したりしないように書く
- 条件式の引数の並び順
  - 比較式の読みやすい並び
    - 左側：変化する「調査対象」
    - 右側：あまり変化しない「比較対象」
    p84